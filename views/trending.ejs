<%- include('partials/header', { title: title, currentPage: currentPage }) %>

<div class="container">
  <div class="page-header">
    <h1 class="page-title">üî• Trending Videos</h1>
    <p class="page-subtitle">Discover what's popular on TikTok right now</p>
  </div>

  <div id="loading-section" class="loading-section">
    <div class="loading-spinner"></div>
    <p>Loading trending videos...</p>
  </div>

  <div id="videos-section" class="videos-section" style="display: none">
    <div id="videos-container" class="videos-grid">
      <!-- Videos will be loaded here by JavaScript -->
    </div>
  </div>

  <div id="error-section" class="error-section" style="display: none">
    <div class="error-message">
      <h3>‚ùå Failed to Load Videos</h3>
      <p id="error-text"></p>
      <button onclick="loadTrendingVideos()" class="retry-button">
        Try Again
      </button>
    </div>
  </div>
</div>

<script>
function loadTrending() {
    if (typeof window.loadTrendingVideos !== 'undefined') {
        window.loadTrendingVideos();
    } else {
        // Wait for app to be ready
        const checkInterval = setInterval(() => {
            if (typeof window.loadTrendingVideos !== 'undefined') {
                clearInterval(checkInterval);
                window.loadTrendingVideos();
            }
        }, 100);
        
        // Timeout after 5 seconds
        setTimeout(() => {
            clearInterval(checkInterval);
            if (typeof window.loadTrendingVideos === 'undefined') {
                console.error("Failed to load trending videos function");
            }
        }, 5000);
    }
}

document.addEventListener('DOMContentLoaded', loadTrending);
</script>

<%- include('partials/footer') %>
